program
  .argument('[path]', 'path to code/project folder')
  .option('-o, --output <folder>', 'output folder', './docs')
  .option('--model <name>', 'AI model to use', 'gemini')
  .option('--verbose', 'show detailed output', false)
  .action(async (pathArg, options) => {
    const config = loadLocalConfig();

    const inputPath = pathArg || config?.input;
    const outputPath = options.output || config?.output || './docs';
    const model = options.model || config?.model || 'gemini';
    const verbose = options.verbose || config?.verbose || false;

    if (!inputPath) {
      console.error('‚ùå No input path specified. Use argument or .codenarratorrc.json');
      process.exit(1);
    }

    await analyzeCodebase(inputPath, { output: outputPath, model, verbose });
  });
